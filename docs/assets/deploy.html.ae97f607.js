import{_ as t,r as o,o as i,c as r,a as n,b as s,d as a,e as l}from"./app.da64f1e0.js";const d={},c=n("h1",{id:"_6-项目部署",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_6-项目部署","aria-hidden":"true"},"#"),s(" 6. 项目部署")],-1),p=n("h3",{id:"_6-1-集成部署",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_6-1-集成部署","aria-hidden":"true"},"#"),s(" 6.1 集成部署")],-1),u={href:"https://nodejs.org/download/release/latest-v16.x",target:"_blank",rel:"noopener noreferrer"},m=n("li",null,"前端使用webstorm或者vscode，分别打开文件夹打开源代码\\source\\vue\\xzs-student和source\\vue\\xzs-admin",-1),v=n("li",null,"执行下面2个命令，下载项目的node_module：",-1),k=l(`<div class="language-npm line-numbers-mode" data-ext="npm"><pre class="language-npm"><code>npm config set sass_binary_site https://registry.npmmirror.com
npm install --registry https://registry.npmmirror.com  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>若执行上面命令报错，先删除node_modules文件夹，再解压node_modules.zip压缩包到当前文件夹。</li><li>打包命令</li></ul><div class="language-npm line-numbers-mode" data-ext="npm"><pre class="language-npm"><code>npm run build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),h=n("li",null,"打包后的目录为student和admin",-1),_=n("li",null,"将文件放到\\source\\xzs\\src\\main\\resources\\static下，然后将java程序打包成jar包",-1),b=n("li",null,"修改application-prod.yml中的datasource地址",-1),g={href:"http://ip:8000/student",target:"_blank",rel:"noopener noreferrer"},x={href:"http://ip:8000/admin",target:"_blank",rel:"noopener noreferrer"},f=n("li",null,"执行下列命令，运行程序",-1),z=l(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>nohup java <span class="token operator">-</span><span class="token class-name">Duser</span><span class="token punctuation">.</span>timezone<span class="token operator">=</span><span class="token class-name">Asia</span><span class="token operator">/</span><span class="token class-name">Shanghai</span> <span class="token operator">-</span>jar <span class="token operator">-</span><span class="token class-name">Dspring</span><span class="token punctuation">.</span>profiles<span class="token punctuation">.</span>active<span class="token operator">=</span>prod  xzs<span class="token operator">-</span><span class="token number">3.9</span><span class="token number">.0</span><span class="token punctuation">.</span>jar  <span class="token operator">&gt;</span> start1<span class="token punctuation">.</span>log  <span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_6-2-前后端分离部署" tabindex="-1"><a class="header-anchor" href="#_6-2-前后端分离部署" aria-hidden="true">#</a> 6.2 前后端分离部署</h3>`,2),y=n("li",null,"采用前后端分离方式部署，后端启动和部署方式1一样",-1),w=n("li",null,"前端采用nginx来装载静态页面,先创建/usr/local/xzs/web/目录，然后将打包后的student、admin放到此目录下",-1),q=n("li",null,"页面访问端口为8001，注意检查防火墙端口是否打开",-1),j={href:"http://ip:8001/student",target:"_blank",rel:"noopener noreferrer"},E={href:"http://ip:8001/admin",target:"_blank",rel:"noopener noreferrer"},A=n("li",null,"nginx配置如下：",-1),T=l(`<div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>      <span class="token number">8001</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> xzs</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span> /usr/local/xzs/web/</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">location</span> /api/</span> <span class="token punctuation">{</span>
       <span class="token directive"><span class="token keyword">proxy_pass</span>  http://localhost:8000</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-docker部署" tabindex="-1"><a class="header-anchor" href="#_6-3-docker部署" aria-hidden="true">#</a> 6.3 docker部署</h3>`,2),C={href:"https://gitee.com/mindskip/xzs-mysql",target:"_blank",rel:"noopener noreferrer"},S={href:"https://www.mindskip.net:999",target:"_blank",rel:"noopener noreferrer"},B=l(`<div class="language-xzs-mysql line-numbers-mode" data-ext="xzs-mysql"><pre class="language-xzs-mysql"><code>CREATE DATABASE \`xzs\` CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci;
USE xzs;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>sql文件改好后，将文件移动到 docker/sql 目录下</li><li>将整个docker目录中的文件，复制到/usr/local/xzs下面</li><li>进入到install目录，执行下面命令，安装docker-compose</li></ul><div class="language-docker-compose line-numbers-mode" data-ext="docker-compose"><pre class="language-docker-compose"><code>cd /usr/local/xzs/install
mv docker-compose-linux-x86_64 /usr/local/bin/docker-compose
chmod +x  /usr/local/bin/docker-compose
docker-compose --version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>执行下面命令，启动学之思网站，有问题可以看下/usr/local/xzs/log中的日志</li></ul><div class="language-docker-xzs line-numbers-mode" data-ext="docker-xzs"><pre class="language-docker-xzs"><code>cd /usr/local/xzs
docker-compose up -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,5),L={href:"http://ip:8000/student",target:"_blank",rel:"noopener noreferrer"},N={href:"http://ip:8000/admin",target:"_blank",rel:"noopener noreferrer"};function V(D,R){const e=o("ExternalLinkIcon");return i(),r("div",null,[c,p,n("ul",null,[n("li",null,[s("安装node16，下载地址："),n("a",u,[s("https://nodejs.org/download/release/latest-v16.x"),a(e)])]),m,v]),k,n("ul",null,[h,_,b,n("li",null,[s("学生端访问地址为："),n("a",g,[s("http://ip:8000/student"),a(e)])]),n("li",null,[s("管理员端访问地址为："),n("a",x,[s("http://ip:8000/admin"),a(e)])]),f]),z,n("ul",null,[y,w,q,n("li",null,[s("学生端访问地址为："),n("a",j,[s("http://ip:8001/student"),a(e)])]),n("li",null,[s("管理员端访问地址为："),n("a",E,[s("http://ip:8001/admin"),a(e)])]),A]),T,n("ul",null,[n("li",null,[s("打开网站"),n("a",C,[s("https://gitee.com/mindskip/xzs-mysql"),a(e)]),s("，找到docker目录，里面有已配置好的文件")]),n("li",null,[s("下载sql脚本，下载教程"),n("a",S,[s("https://www.mindskip.net:999"),a(e)]),s("，然后解压sql压缩包，找到xzs-mysql.sql文件，编辑此文件，在文件开头加如下代码：")])]),B,n("ul",null,[n("li",null,[s("学生端访问地址为："),n("a",L,[s("http://ip:8000/student"),a(e)])]),n("li",null,[s("管理员端访问地址为："),n("a",N,[s("http://ip:8000/admin"),a(e)])])])])}const H=t(d,[["render",V],["__file","deploy.html.vue"]]);export{H as default};
